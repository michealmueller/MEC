(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(b){var d={element:"body",position:null,type:"info",allow_dismiss:true,allow_duplicates:true,newest_on_top:false,showProgressbar:false,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5000,timer:1000,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,onClick:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){var e=arguments;var f=arguments[0];return f.replace(/(\{\{\d\}\}|\{\d\})/g,function(h){if(h.substring(0,2)==="{{"){return h}var g=parseInt(h.match(/\d/)[0]);return e[g+1]})};function c(f){var e=false;b('[data-notify="container"]').each(function(k,l){var j=b(l);var o=j.find('[data-notify="title"]').html().trim();var n=j.find('[data-notify="message"]').html().trim();var g=o===b("<div>"+f.settings.content.title+"</div>").html().trim();var m=n===b("<div>"+f.settings.content.message+"</div>").html().trim();var h=j.hasClass("alert-"+f.settings.type);if(g&&m&&h){e=true}return !e});return e}function a(g,h,f){var e={content:{message:typeof h==="object"?h.message:h,title:h.title?h.title:"",icon:h.icon?h.icon:"",url:h.url?h.url:"#",target:h.target?h.target:"-"}};f=b.extend(true,{},e,f);this.settings=b.extend(true,{},d,f);this._defaults=d;if(this.settings.content.target==="-"){this.settings.content.target=this.settings.url_target}this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"};if(typeof this.settings.offset==="number"){this.settings.offset={x:this.settings.offset,y:this.settings.offset}}if(this.settings.allow_duplicates||(!this.settings.allow_duplicates&&!c(this))){this.init()}}b.extend(a.prototype,{init:function(){var e=this;this.buildNotify();if(this.settings.content.icon){this.setIcon()}if(this.settings.content.url!="#"){this.styleURL()}this.styleDismiss();this.placement();this.bind();this.notify={$ele:this.$ele,update:function(j,l){var f={};if(typeof j==="string"){f[j]=l}else{f=j}for(var i in f){switch(i){case"type":this.$ele.removeClass("alert-"+e.settings.type);this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+e.settings.type);e.settings.type=f[i];this.$ele.addClass("alert-"+f[i]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+f[i]);break;case"icon":var g=this.$ele.find('[data-notify="icon"]');if(e.settings.icon_type.toLowerCase()==="class"){g.removeClass(e.settings.content.icon).addClass(f[i])}else{if(!g.is("img")){g.find("img")}g.attr("src",f[i])}e.settings.content.icon=f[j];break;case"progress":var h=e.settings.delay-(e.settings.delay*(f[i]/100));this.$ele.data("notify-delay",h);this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",f[i]).css("width",f[i]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",f[i]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",f[i]);break;default:this.$ele.find('[data-notify="'+i+'"]').html(f[i])}}var k=this.$ele.outerHeight()+parseInt(e.settings.spacing)+parseInt(e.settings.offset.y);e.reposition(k)},close:function(){e.close()}}},buildNotify:function(){var e=this.settings.content;this.$ele=b(String.format(this.settings.template,this.settings.type,e.title,e.message,e.url,e.target));this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align);if(!this.settings.allow_dismiss){this.$ele.find('[data-notify="dismiss"]').css("display","none")}if((this.settings.delay<=0&&!this.settings.showProgressbar)||!this.settings.showProgressbar){this.$ele.find('[data-notify="progressbar"]').remove()}},setIcon:function(){if(this.settings.icon_type.toLowerCase()==="class"){this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon)}else{if(this.$ele.find('[data-notify="icon"]').is("img")){this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon)}else{this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')}}},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var e=this,i=this.settings.offset.y,f={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:(this.settings.element==="body"?"fixed":"absolute"),transition:"all .5s ease-in-out",zIndex:this.settings.z_index},h=false,g=this.settings;b('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){i=Math.max(i,parseInt(b(this).css(g.placement.from))+parseInt(b(this).outerHeight())+parseInt(g.spacing))});if(this.settings.newest_on_top===true){i=this.settings.offset.y}f[this.settings.placement.from]=i+"px";switch(this.settings.placement.align){case"left":case"right":f[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":f.left=0;f.right=0;break}this.$ele.css(f).addClass(this.settings.animate.enter);b.each(Array("webkit-","moz-","o-","ms-",""),function(j,k){e.$ele[0].style[k+"AnimationIterationCount"]=1});b(this.settings.element).append(this.$ele);if(this.settings.newest_on_top===true){i=(parseInt(i)+parseInt(this.settings.spacing))+this.$ele.outerHeight();this.reposition(i)}if(b.isFunction(e.settings.onShow)){e.settings.onShow.call(this.$ele)}this.$ele.one(this.animations.start,function(){h=true}).one(this.animations.end,function(){e.$ele.removeClass(e.settings.animate.enter);if(b.isFunction(e.settings.onShown)){e.settings.onShown.call(this)}});setTimeout(function(){if(!h){if(b.isFunction(e.settings.onShown)){e.settings.onShown.call(this)}}},600)},bind:function(){var e=this;this.$ele.find('[data-notify="dismiss"]').on("click",function(){e.close()});if(b.isFunction(e.settings.onClick)){this.$ele.on("click",function(g){if(g.target!=e.$ele.find('[data-notify="dismiss"]')[0]){e.settings.onClick.call(this,g)}})}this.$ele.mouseover(function(){b(this).data("data-hover","true")}).mouseout(function(){b(this).data("data-hover","false")});this.$ele.data("data-hover","false");if(this.settings.delay>0){e.$ele.data("notify-delay",e.settings.delay);var f=setInterval(function(){var g=parseInt(e.$ele.data("notify-delay"))-e.settings.timer;if((e.$ele.data("data-hover")==="false"&&e.settings.mouse_over==="pause")||e.settings.mouse_over!="pause"){var h=((e.settings.delay-g)/e.settings.delay)*100;e.$ele.data("notify-delay",g);e.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",h).css("width",h+"%")}if(g<=-(e.settings.timer)){clearInterval(f);e.close()}},e.settings.timer)}},close:function(){var e=this,g=parseInt(this.$ele.css(this.settings.placement.from)),f=false;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit);e.reposition(g);if(b.isFunction(e.settings.onClose)){e.settings.onClose.call(this.$ele)}this.$ele.one(this.animations.start,function(){f=true}).one(this.animations.end,function(){b(this).remove();if(b.isFunction(e.settings.onClosed)){e.settings.onClosed.call(this)}});setTimeout(function(){if(!f){e.$ele.remove();if(b.isFunction(e.settings.onClosed)){e.settings.onClosed.call(this)}}},600)},reposition:function(h){var e=this,g='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',f=this.$ele.nextAll(g);if(this.settings.newest_on_top===true){f=this.$ele.prevAll(g)}f.each(function(){b(this).css(e.settings.placement.from,h);h=(parseInt(h)+parseInt(e.settings.spacing))+b(this).outerHeight()})}});b.notify=function(g,e){var f=new a(this,g,e);return f.notify};b.notifyDefaults=function(e){d=b.extend(true,{},d,e);return d};b.notifyClose=function(e){if(typeof e==="undefined"||e==="all"){b("[data-notify]").find('[data-notify="dismiss"]').trigger("click")}else{if(e==="success"||e==="info"||e==="warning"||e==="danger"){b(".alert-"+e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click")}else{if(e){b(e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click")}else{b('[data-notify-position="'+e+'"]').find('[data-notify="dismiss"]').trigger("click")}}}};b.notifyCloseExcept=function(e){if(e==="success"||e==="info"||e==="warning"||e==="danger"){b("[data-notify]").not(".alert-"+e).find('[data-notify="dismiss"]').trigger("click")}else{b("[data-notify]").not(e).find('[data-notify="dismiss"]').trigger("click")}}}));