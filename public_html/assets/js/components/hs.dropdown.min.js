(function(e){e.HSCore.components.HSDropdown={_baseConfig:{dropdownEvent:"click",dropdownType:"simple",dropdownDuration:300,dropdownEasing:"linear",dropdownAnimationIn:"fadeIn",dropdownAnimationOut:"fadeOut",dropdownHideOnScroll:true,dropdownHideOnBlur:false,dropdownDelay:350,afterOpen:function(g){},afterClose:function(g){}},_pageCollection:e(),init:function(j,i){var h;if(!j||!j.length){return}h=this;var g;j.each(function(l,m){var o=e(m),k;if(o.data("HSDropDown")){return}k=i&&e.isPlainObject(i)?e.extend(true,{},h._baseConfig,i,o.data()):e.extend(true,{},h._baseConfig,o.data());switch(k.dropdownType){case"css-animation":o.data("HSDropDown",new c(o,k));break;case"jquery-slide":o.data("HSDropDown",new f(o,k));break;default:o.data("HSDropDown",new d(o,k))}h._pageCollection=h._pageCollection.add(o);h._bindEvents(o,k.dropdownEvent,k.dropdownDelay);var n=e(m).data("HSDropDown");g=e(n.target).find("input, textarea").length});e(document).on("keyup.HSDropDown",function(k){if(k.keyCode&&k.keyCode==27){h._pageCollection.each(function(l,n){var m=e(window).width(),o=Boolean(e(n).data("is-mobile-only"));if(!o){e(n).data("HSDropDown").hide()}else{if(o&&m<769){e(n).data("HSDropDown").hide()}}})}});e(window).on("click",function(k){h._pageCollection.each(function(l,n){var m=e(window).width(),o=Boolean(e(n).data("is-mobile-only"));if(!o){e(n).data("HSDropDown").hide()}else{if(o&&m<769){e(n).data("HSDropDown").hide()}}})});h._pageCollection.each(function(k,l){var m=e(l).data("HSDropDown").config.dropdownTarget;e(m).on("click",function(n){n.stopPropagation()})});e(window).on("scroll.HSDropDown",function(k){h._pageCollection.each(function(l,m){var n=e(m).data("HSDropDown");if(n.getOption("dropdownHideOnScroll")&&g===0){n.hide()}else{if(n.getOption("dropdownHideOnScroll")&&!(/iPhone|iPad|iPod/i.test(navigator.userAgent))){n.hide()}}})});e(window).on("resize.HSDropDown",function(k){if(h._resizeTimeOutId){clearTimeout(h._resizeTimeOutId)}h._resizeTimeOutId=setTimeout(function(){h._pageCollection.each(function(l,m){var n=e(m).data("HSDropDown");n.smartPosition(n.target)})},50)});return j},_bindEvents:function(g,i,h){var j=e(g.data("dropdown-target"));if(i=="hover"&&!a()){g.on("mouseenter.HSDropDown",function(m){var l=e(this),k=l.data("HSDropDown");if(!k){return}if(k.dropdownTimeOut){clearTimeout(k.dropdownTimeOut)}k.show()}).on("mouseleave.HSDropDown",function(m){var l=e(this),k=l.data("HSDropDown");if(!k){return}k.dropdownTimeOut=setTimeout(function(){k.hide()},h)});if(j.length){j.on("mouseenter.HSDropDown",function(l){var k=g.data("HSDropDown");if(k.dropdownTimeOut){clearTimeout(k.dropdownTimeOut)}k.show()}).on("mouseleave.HSDropDown",function(l){var k=g.data("HSDropDown");k.dropdownTimeOut=setTimeout(function(){k.hide()},h)})}}else{g.on("click.HSDropDown",function(l){var k=e(this);if(!k.data("HSDropDown")){return}if(e("[data-dropdown-target].active").length){e("[data-dropdown-target].active").data("HSDropDown").toggle()}k.data("HSDropDown").toggle();l.stopPropagation();l.preventDefault()})}}};function a(){return"ontouchstart" in window}function b(h,g){if(!h.length){return false}this.element=h;this.config=g;this.target=e(this.element.data("dropdown-target"));this.allInvokers=e('[data-dropdown-target="'+this.element.data("dropdown-target")+'"]');this.toggle=function(){if(!this.target.length){return this}if(this.defaultState){this.show()}else{this.hide()}return this};this.smartPosition=function(m){if(m.data("baseDirection")){m.css(m.data("baseDirection").direction,m.data("baseDirection").value)}m.removeClass("u-dropdown--reverse-y");var k=e(window),j=getComputedStyle(m.get(0)),l=Math.abs(parseInt(j.left,10))<40?"left":"right",i=m.offset();if(l=="right"){if(!m.data("baseDirection")){m.data("baseDirection",{direction:"right",value:parseInt(j.right,10)})}if(i.left<0){m.css("right",(parseInt(m.css("right"),10)-(i.left-10))*-1)}}else{if(!m.data("baseDirection")){m.data("baseDirection",{direction:"left",value:parseInt(j.left,10)})}if(i.left+m.outerWidth()>k.width()){m.css("left",(parseInt(m.css("left"),10)-(i.left+m.outerWidth()+10-k.width())))}}if(i.top+m.outerHeight()-k.scrollTop()>k.height()){m.addClass("u-dropdown--reverse-y")}};this.getOption=function(i){return this.config[i]?this.config[i]:null};return true}function d(h,g){if(!b.call(this,h,g)){return}Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-dropdown--hidden")}});this.target.addClass("u-dropdown--simple");this.hide()}d.prototype.show=function(){var g=e(this)[0].config.dropdownTarget;e('[data-dropdown-target="'+g+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-dropdown--hidden");if(this.allInvokers.length){this.allInvokers.attr("aria-expanded","true")}this.config.afterOpen.call(this.target,this.element);return this};d.prototype.hide=function(){var g=e(this)[0].config.dropdownTarget;e('[data-dropdown-target="'+g+'"]').removeClass("active");this.target.addClass("u-dropdown--hidden");if(this.allInvokers.length){this.allInvokers.attr("aria-expanded","false")}this.config.afterClose.call(this.target,this.element);return this};function c(i,h){if(!b.call(this,i,h)){return}var g=this;this.target.addClass("u-dropdown--css-animation u-dropdown--hidden").css("animation-duration",g.config.dropdownDuration+"ms");Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-dropdown--hidden")}});if(this.target.length){this.target.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(j){if(g.target.hasClass(g.config.dropdownAnimationOut)){g.target.removeClass(g.config.dropdownAnimationOut).addClass("u-dropdown--hidden");if(g.allInvokers.length){g.allInvokers.attr("aria-expanded","false")}g.config.afterClose.call(g.target,g.element)}if(g.target.hasClass(g.config.dropdownAnimationIn)){if(g.allInvokers.length){g.allInvokers.attr("aria-expanded","true")}g.config.afterOpen.call(g.target,g.element)}j.preventDefault();j.stopPropagation()})}}c.prototype.show=function(){var g=e(this)[0].config.dropdownTarget;e('[data-dropdown-target="'+g+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-dropdown--hidden").removeClass(this.config.dropdownAnimationOut).addClass(this.config.dropdownAnimationIn)};c.prototype.hide=function(){var g=e(this)[0].config.dropdownTarget;e('[data-dropdown-target="'+g+'"]').removeClass("active");this.target.removeClass(this.config.dropdownAnimationIn).addClass(this.config.dropdownAnimationOut)};function f(h,g){if(!b.call(this,h,g)){return}this.target.addClass("u-dropdown--jquery-slide u-dropdown--hidden").hide();Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-dropdown--hidden")}})}f.prototype.show=function(){var g=this;var h=e(this)[0].config.dropdownTarget;e('[data-dropdown-target="'+h+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-dropdown--hidden").stop().slideDown({duration:g.config.dropdownDuration,easing:g.config.dropdownEasing,complete:function(){g.config.afterOpen.call(g.target,g.element)}})};f.prototype.hide=function(){var g=this;var h=e(this)[0].config.dropdownTarget;e('[data-dropdown-target="'+h+'"]').removeClass("active");this.target.stop().slideUp({duration:g.config.dropdownDuration,easing:g.config.dropdownEasing,complete:function(){g.config.afterClose.call(g.target,g.element);g.target.addClass("u-dropdown--hidden")}})}})(jQuery);